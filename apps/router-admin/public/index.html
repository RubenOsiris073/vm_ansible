<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Router RESTCONF Admin</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <main class="container">
      <header>
        <h1>Router RESTCONF Admin</h1>
        <p>Administra tu router Cisco IOS-XE usando RESTCONF API</p>
      </header>

      <div class="layout">
        <section class="card connection-card">
          <h2>Conexión al Router</h2>
          <form id="connection-form">
            <div class="field">
              <label for="ip">IP del router</label>
              <input id="ip" name="ip" type="text" required placeholder="192.168.77.4" />
            </div>
            <div class="field">
              <label for="port">Puerto RESTCONF</label>
              <input id="port" name="port" type="number" placeholder="443" value="443" />
            </div>
            <div class="field">
              <label for="username">Usuario</label>
              <input id="username" name="username" type="text" required placeholder="admin" />
            </div>
            <div class="field">
              <label for="password">Contraseña</label>
              <input id="password" name="password" type="password" required />
            </div>
            <div class="actions">
              <button type="submit" id="connect-btn">Conectar</button>
              <button type="button" id="disconnect-btn" class="secondary" disabled>Desconectar</button>
            </div>
          </form>
          <div id="connection-status" class="status-box"></div>
        </section>

        <section class="card operations-card">
          <h2>Operaciones RESTCONF</h2>

          <div class="operation-selector">
            <label for="operation">Operación:</label>
            <select id="operation">
              <option value="">-- Selecciona una operación --</option>
              <optgroup label="Consultas (GET)">
                <option value="getConfig">GET - Obtener Configuración Completa</option>
                <option value="getSystemInfo">GET - Información del Sistema</option>
                <option value="getInterfaces">GET - Configuración de Interfaces</option>
                <option value="getInterfacesState">GET - Estado de Interfaces</option>
                <option value="getRoutingTable">GET - Tabla de Routing</option>
                <option value="getCdpNeighbors">GET - Vecinos CDP</option>
              </optgroup>
              <optgroup label="Modificaciones">
                <option value="setHostname">PUT - Cambiar Hostname</option>
                <option value="setInterfaceDescription">PATCH - Cambiar Descripción Interface</option>
                <option value="addLoopback">POST - Agregar Interface Loopback</option>
                <option value="deleteLoopback">DELETE - Eliminar Interface Loopback</option>
                <option value="deleteInterfaceDescription">DELETE - Eliminar Descripción de Interface</option>
              </optgroup>
              <optgroup label="Personalizado">
                <option value="custom">Endpoint Personalizado (GET/PUT/PATCH/POST/DELETE)</option>
              </optgroup>
            </select>
          </div>

          <div id="custom-endpoint" class="field" style="display: none;">
            <label for="endpoint">Endpoint personalizado:</label>
            <input id="endpoint" type="text" placeholder="/data/Cisco-IOS-XE-native:native/interface" />
            <label for="custom-method">Método HTTP:</label>
            <select id="custom-method">
              <option value="GET">GET</option>
              <option value="PUT">PUT</option>
              <option value="PATCH">PATCH</option>
              <option value="POST">POST</option>
              <option value="DELETE">DELETE</option>
            </select>
          </div>

          <!-- Campos específicos para operaciones de modificación -->
          <div id="hostname-field" class="field" style="display: none;">
            <label for="new-hostname">Nuevo Hostname:</label>
            <input id="new-hostname" type="text" placeholder="ROUTER-NUEVO-NOMBRE" maxlength="63" />
            <small>Máximo 63 caracteres, sin espacios ni caracteres especiales</small>
          </div>

          <div id="interface-desc-field" class="field" style="display: none;">
            <label for="interface-name">Interface:</label>
            <select id="interface-name">
              <option value="GigabitEthernet=1">GigabitEthernet1</option>
              <option value="GigabitEthernet=2">GigabitEthernet2</option>
            </select>
            <label for="interface-description">Nueva Descripción:</label>
            <input id="interface-description" type="text" placeholder="Descripción de la interface" maxlength="240" />
          </div>

          <div id="loopback-field" class="field" style="display: none;">
            <label for="loopback-number">Número de Loopback:</label>
            <input id="loopback-number" type="number" placeholder="100" min="0" max="2147483647" />
            <label for="loopback-ip">IP Address:</label>
            <input id="loopback-ip" type="text" placeholder="10.10.10.1" pattern="^(?:[0-9]{1,3}\.){3}[0-9]{1,3}$" />
            <label for="loopback-mask">Subnet Mask:</label>
            <select id="loopback-mask">
              <option value="255.255.255.255">/32 - Host (255.255.255.255)</option>
              <option value="255.255.255.0">/24 - (255.255.255.0)</option>
              <option value="255.255.0.0">/16 - (255.255.0.0)</option>
              <option value="255.0.0.0">/8 - (255.0.0.0)</option>
            </select>
            <label for="loopback-desc">Descripción (opcional):</label>
            <input id="loopback-desc" type="text" placeholder="Nueva interface loopback" />
          </div>

          <div id="delete-loopback-field" class="field" style="display: none;">
            <label for="delete-loopback-number">Número de Loopback a eliminar:</label>
            <input id="delete-loopback-number" type="number" placeholder="100" min="0" max="2147483647" />
            <small>⚠️ Esta operación eliminará completamente la interface loopback especificada</small>
          </div>

          <div id="delete-interface-desc-field" class="field" style="display: none;">
            <label for="delete-interface-name">Interface:</label>
            <select id="delete-interface-name">
              <option value="GigabitEthernet=1">GigabitEthernet1</option>
              <option value="GigabitEthernet=2">GigabitEthernet2</option>
            </select>
            <small>⚠️ Esta operación eliminará solo la descripción de la interface (no afecta IP ni conectividad)</small>
          </div>



          <div id="data-field" class="field" style="display: none;">
            <label for="data">Datos JSON:</label>
            <textarea id="data" placeholder='{"example": "data"}'></textarea>
          </div>

          <div class="actions">
            <button type="button" id="execute-btn" disabled>Ejecutar Operación</button>
            <button type="button" id="clear-btn">Limpiar Resultado</button>
          </div>
          
          <!-- Sección de herramientas de red -->
          <div class="tools-section">
            <h3>Herramientas de Red</h3>
            <div class="tools-actions">
              <button type="button" id="ping-test-btn" class="tool-button">Probar Conectividad (Ping)</button>
            </div>
          </div>
        </section>

        <section class="card result-card">
          <h2>Resultado</h2>
          <div id="result-area" class="result-display">
            <p class="placeholder">Conecta al router y ejecuta una operación para ver los resultados aquí.</p>
          </div>
        </section>
      </div>
    </main>

    <!-- Modal Simple para Ping Test -->
    <div id="ping-modal" class="simple-modal" style="display: none;">
      <div class="modal-content">
        <div class="modal-header">
          <h3>Probar Conectividad</h3>
          <button class="modal-close" id="ping-modal-close">&times;</button>
        </div>
        
        <div class="modal-body">
          <div class="field">
            <label for="ping-ip">Dirección IP o Hostname:</label>
            <input id="ping-ip" type="text" placeholder="192.168.77.4" />
          </div>
          
          <div class="field">
            <label for="ping-count">Cantidad de pings:</label>
            <select id="ping-count">
              <option value="3">3 pings</option>
              <option value="5" selected>5 pings</option>
              <option value="10">10 pings</option>
            </select>
          </div>
          
          <div class="modal-actions">
            <button type="button" id="execute-ping-btn" class="btn-primary">Ejecutar Ping</button>
            <button type="button" id="cancel-ping-btn" class="btn-secondary">Cancelar</button>
          </div>
          
          <div id="ping-result" class="ping-result-container" style="display: none;">
            <h4>Resultado del Ping:</h4>
            <div id="ping-output" class="ping-output"></div>
          </div>
        </div>
      </div>
    </div>

    <script src="app.js"></script>
  </body>
</html>
